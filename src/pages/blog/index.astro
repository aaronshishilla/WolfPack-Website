---
import BaseLayout from "@/layouts/BaseLayout.astro";
import PostCard from "@/components/PostCard.astro";
import { getPosts } from "@/lib/wordpress";
import type { WPPost } from "@/types/wordpress";

let allPosts: WPPost[] = [];

try {
  const { posts } = await getPosts(50);
  allPosts = posts;
} catch {
  // WordPress unavailable
}
---

<BaseLayout
  title="Blog | WolfPack Advising"
  description="Insights, strategies, and stories from the WolfPack Advising team."
>
  <section class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h1 class="text-4xl font-bold text-[var(--color-brand-dark)] mb-2">Blog</h1>
      <p class="text-gray-600 mb-12 max-w-2xl">
        Insights and strategies to help your business grow.
      </p>

      {allPosts.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {allPosts.map((post) => (
            <PostCard post={post} />
          ))}
        </div>
      ) : (
        <div class="text-center py-16 text-gray-500">
          <p class="text-lg">No posts yet. Check back soon!</p>
          <p class="text-sm mt-2">
            Posts will appear here once WordPress is connected and content is published.
          </p>
        </div>
      )}
    </div>
  </section>
</BaseLayout>
