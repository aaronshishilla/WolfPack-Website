---
import type { WPPost } from "@/types/wordpress";
import { formatDate } from "@/lib/wordpress";

interface Props {
  post: WPPost;
}

const { post } = Astro.props;
const imageUrl = post.featuredImage?.node?.sourceUrl;
const category = post.categories?.nodes?.[0];
---

<article class="card-modern group h-full flex flex-col">
  {imageUrl && (
    <a href={`/blog/${post.slug}`} class="img-zoom block">
      <img
        src={imageUrl}
        alt={post.featuredImage?.node?.altText || post.title}
        class="w-full h-52 object-cover"
        loading="lazy"
      />
    </a>
  )}
  <div class="p-6 flex flex-col flex-1">
    {category && (
      <span class="inline-block self-start text-xs font-semibold uppercase tracking-wider text-[var(--color-brand-accent)] bg-[var(--color-brand-accent)]/10 px-3 py-1 rounded-full">
        {category.name}
      </span>
    )}
    <h3 class="mt-3 text-lg font-bold text-[var(--color-brand-dark)] group-hover:text-[var(--color-brand-primary)] transition-colors">
      <a href={`/blog/${post.slug}`}>
        {post.title}
      </a>
    </h3>
    <div class="mt-3 text-sm text-gray-500 line-clamp-3 flex-1" set:html={post.excerpt} />
    <div class="mt-6 pt-4 border-t border-gray-100 flex items-center justify-between text-xs text-gray-400">
      <span class="font-medium">{post.author?.node?.name}</span>
      <time datetime={post.date}>{formatDate(post.date)}</time>
    </div>
  </div>
</article>
